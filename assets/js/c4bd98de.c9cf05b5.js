"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[766],{4e3(e,t,s){s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"Testing-Best-Practices","title":"Testing Best Practices","description":"Overview","source":"@site/docs/Testing-Best-Practices.md","sourceDirName":".","slug":"/Testing-Best-Practices","permalink":"/django-rest-best-practices/Testing-Best-Practices","draft":false,"unlisted":false,"editUrl":"https://github.com/pragnakalp/django-rest-best-practices/tree/main/docs/Testing-Best-Practices.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Production-Grade Error Handling and Status Codes","permalink":"/django-rest-best-practices/Error-Handling-and-Status-Codes"}}');var a=s(4848),r=s(8453);const i={},l="Testing Best Practices",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Testing Tools",id:"testing-tools",level:2},{value:"DRF Testing Framework",id:"drf-testing-framework",level:3},{value:"Additional Testing Tools",id:"additional-testing-tools",level:3},{value:"Test Structure",id:"test-structure",level:2},{value:"Organize Tests by Feature",id:"organize-tests-by-feature",level:3},{value:"Use Factories for Test Data",id:"use-factories-for-test-data",level:3},{value:"Testing CRUD Operations",id:"testing-crud-operations",level:2},{value:"Test List Endpoint",id:"test-list-endpoint",level:3},{value:"Test Create Endpoint",id:"test-create-endpoint",level:3},{value:"Test Retrieve Endpoint",id:"test-retrieve-endpoint",level:3},{value:"Test Update Endpoint",id:"test-update-endpoint",level:3},{value:"Test Delete Endpoint",id:"test-delete-endpoint",level:3},{value:"Testing Authentication",id:"testing-authentication",level:2},{value:"Test JWT Authentication (Standard)",id:"test-jwt-authentication-standard",level:3},{value:"Test Token Authentication (\u26a0\ufe0f LEGACY - Not Recommended)",id:"test-token-authentication-\ufe0f-legacy---not-recommended",level:3},{value:"Testing Permissions",id:"testing-permissions",level:2},{value:"Test Object-Level Permissions",id:"test-object-level-permissions",level:3},{value:"Testing Serializers",id:"testing-serializers",level:2},{value:"Test Serializer Validation",id:"test-serializer-validation",level:3},{value:"Testing Filtering and Searching",id:"testing-filtering-and-searching",level:2},{value:"Testing Custom Actions",id:"testing-custom-actions",level:2},{value:"Testing Rate Limiting",id:"testing-rate-limiting",level:2},{value:"Testing with Mocks",id:"testing-with-mocks",level:2},{value:"Performance Testing",id:"performance-testing",level:2},{value:"Integration Tests",id:"integration-tests",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"testing-best-practices",children:"Testing Best Practices"})}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"Comprehensive testing ensures your Django REST Framework API is reliable, maintainable, and functions as expected. This document covers best practices for testing DRF APIs."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"\ud83c\udfd7\ufe0f Architecture Note:"})," When testing APIs that use the service/selector pattern (see ",(0,a.jsx)(t.code,{children:"01-API-Design-and-Architecture.md"}),"), test business logic in service layer tests separately from API endpoint tests."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"testing-tools",children:"Testing Tools"}),"\n",(0,a.jsx)(t.h3,{id:"drf-testing-framework",children:"DRF Testing Framework"}),"\n",(0,a.jsxs)(t.p,{children:["Django REST Framework provides ",(0,a.jsx)(t.code,{children:"APITestCase"})," and ",(0,a.jsx)(t.code,{children:"APIClient"})," for testing APIs."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"from rest_framework.test import APITestCase, APIClient\nfrom rest_framework import status\nfrom django.contrib.auth.models import User\nfrom .models import Article\n\nclass ArticleAPITestCase(APITestCase):\n    def setUp(self):\n        \"\"\"Set up test data - runs before each test method\"\"\"\n        self.client = APIClient()  # DRF's test client with API support\n        self.user = User.objects.create_user(\n            username='testuser',\n            email='test@example.com',\n            password='testpass123'\n        )\n        self.article = Article.objects.create(\n            title='Test Article',\n            content='Test content',\n            author=self.user\n        )\n    \n    def test_list_articles(self):\n        \"\"\"Test retrieving article list\"\"\"\n        response = self.client.get('/api/articles/')  # Make GET request\n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Check status code\n        self.assertEqual(len(response.data), 1)  # Verify one article returned\n"})}),"\n",(0,a.jsx)(t.h3,{id:"additional-testing-tools",children:"Additional Testing Tools"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# pytest-django for pytest support - provides better test organization and fixtures\npip install pytest-django\n\n# factory_boy for test data generation - creates realistic test data without fixtures\npip install factory-boy\n\n# faker for fake data - generates realistic fake data for testing\npip install faker\n\n# coverage for code coverage\npip install coverage\n"})}),"\n",(0,a.jsx)(t.h2,{id:"test-structure",children:"Test Structure"}),"\n",(0,a.jsx)(t.h3,{id:"organize-tests-by-feature",children:"Organize Tests by Feature"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"myapp/\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_models.py\n\u2502   \u251c\u2500\u2500 test_serializers.py\n\u2502   \u251c\u2500\u2500 test_views.py\n\u2502   \u251c\u2500\u2500 test_permissions.py\n\u2502   \u251c\u2500\u2500 test_authentication.py\n\u2502   \u2514\u2500\u2500 factories.py\n"})}),"\n",(0,a.jsx)(t.h3,{id:"use-factories-for-test-data",children:"Use Factories for Test Data"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"# tests/factories.py\nimport factory\nfrom factory.django import DjangoModelFactory\nfrom django.contrib.auth.models import User\nfrom myapp.models import Article, Comment\n\nclass UserFactory(DjangoModelFactory):\n    class Meta:\n        model = User\n    \n    username = factory.Sequence(lambda n: f'user{n}')  # Generate unique usernames\n    email = factory.LazyAttribute(lambda obj: f'{obj.username}@example.com')  # Dynamic email based on username\n    first_name = factory.Faker('first_name')  # Random first name\n    last_name = factory.Faker('last_name')  # Random last name\n\nclass ArticleFactory(DjangoModelFactory):\n    class Meta:\n        model = Article\n    \n    title = factory.Faker('sentence', nb_words=6)  # Random 6-word title\n    content = factory.Faker('paragraph', nb_sentences=10)  # Random 10-sentence content\n    author = factory.SubFactory(UserFactory)  # Create related user automatically\n    published = False  # Default to unpublished\n\nclass CommentFactory(DjangoModelFactory):\n    class Meta:\n        model = Comment\n    \n    article = factory.SubFactory(ArticleFactory)  # Create related article automatically\n    author = factory.SubFactory(UserFactory)  # Create related user automatically\n    content = factory.Faker('paragraph')\n\n# Usage in tests\narticle = ArticleFactory()  # Create single article with default values\narticles = ArticleFactory.create_batch(5)  # Create 5 articles at once\npublished_article = ArticleFactory(published=True)  # Create article with custom value\n"})}),"\n",(0,a.jsx)(t.h2,{id:"testing-crud-operations",children:"Testing CRUD Operations"}),"\n",(0,a.jsx)(t.h3,{id:"test-list-endpoint",children:"Test List Endpoint"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'class ArticleListTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.articles = ArticleFactory.create_batch(5, author=self.user)  # Create 5 articles for testing\n    \n    def test_list_articles(self):\n        """Test retrieving list of articles"""\n        response = self.client.get(\'/api/articles/\')  # Make GET request to list endpoint\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify success status\n        self.assertEqual(len(response.data[\'results\']), 5)  # Check all 5 articles returned\n    \n    def test_list_articles_pagination(self):\n        """Test pagination works correctly"""\n        ArticleFactory.create_batch(25)  # Add 25 more articles (total 30)\n        \n        response = self.client.get(\'/api/articles/?page=1&page_size=10\')  # Request first page with 10 items\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify success\n        self.assertEqual(len(response.data[\'results\']), 10)  # Check page size\n        self.assertIsNotNone(response.data[\'next\'])  # Verify next page exists\n        self.assertIsNone(response.data[\'previous\'])  # Verify no previous page (first page)\n    \n    def test_list_articles_filtering(self):\n        """Test filtering by published status"""\n        ArticleFactory.create_batch(3, published=True)  # Create 3 published articles\n        ArticleFactory.create_batch(2, published=False)  # Create 2 unpublished articles\n        \n        response = self.client.get(\'/api/articles/?published=true\')  # Filter for published articles\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify success\n        self.assertEqual(len(response.data[\'results\']), 3)  # Check only published articles returned\n'})}),"\n",(0,a.jsx)(t.h3,{id:"test-create-endpoint",children:"Test Create Endpoint"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"class ArticleCreateTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.client.force_authenticate(user=self.user)  # Authenticate user for protected endpoint\n        self.valid_data = {  # Valid article data for testing\n            'title': 'New Article',\n            'content': 'Article content here',\n            'published': False\n        }\n    \n    def test_create_article_success(self):\n        \"\"\"Test creating article with valid data\"\"\"\n        response = self.client.post('/api/articles/', self.valid_data)  # POST request to create article\n        \n        self.assertEqual(response.status_code, status.HTTP_201_CREATED)  # Verify creation success\n        self.assertEqual(Article.objects.count(), 1)  # Check one article exists in database\n        self.assertEqual(response.data['title'], self.valid_data['title'])  # Verify returned data\n        self.assertEqual(response.data['author'], self.user.id)  # Verify author set correctly\n    \n    def test_create_article_without_authentication(self):\n        \"\"\"Test creating article without authentication fails\"\"\"\n        self.client.force_authenticate(user=None)  # Remove authentication\n        \n        response = self.client.post('/api/articles/', self.valid_data)  # Try to create without auth\n        \n        self.assertEqual(response.status_code, status.HTTP_401_UNAUTHORIZED)  # Verify auth required\n        self.assertEqual(Article.objects.count(), 0)  # Verify no article created\n    \n    def test_create_article_invalid_data(self):\n        \"\"\"Test creating article with invalid data fails\"\"\"\n        invalid_data = {'title': 'ab'}  # Too short title (violates validation)\n        \n        response = self.client.post('/api/articles/', invalid_data)  # POST with invalid data\n        \n        self.assertEqual(response.status_code, status.HTTP_400_BAD_REQUEST)  # Verify validation error\n        self.assertIn('title', response.data)  # Check title field has errors\n        self.assertEqual(Article.objects.count(), 0)  # Verify no article created\n    \n    def test_create_article_missing_required_field(self):\n        \"\"\"Test creating article without required field fails\"\"\"\n        incomplete_data = {'content': 'Content without title'}  # Missing required title\n        \n        response = self.client.post('/api/articles/', incomplete_data)  # POST with incomplete data\n        \n        self.assertEqual(response.status_code, status.HTTP_400_BAD_REQUEST)  # Verify validation error\n        self.assertIn('title', response.data)  # Check title field error exists\n"})}),"\n",(0,a.jsx)(t.h3,{id:"test-retrieve-endpoint",children:"Test Retrieve Endpoint"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'class ArticleRetrieveTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.article = ArticleFactory(author=self.user)  # Create article for testing\n    \n    def test_retrieve_article(self):\n        """Test retrieving single article"""\n        response = self.client.get(f\'/api/articles/{self.article.id}/\')  # GET specific article\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify success\n        self.assertEqual(response.data[\'id\'], self.article.id)  # Check correct article returned\n        self.assertEqual(response.data[\'title\'], self.article.title)  # Verify data integrity\n    \n    def test_retrieve_nonexistent_article(self):\n        """Test retrieving non-existent article returns 404"""\n        response = self.client.get(\'/api/articles/99999/\')  # Request non-existent article\n        \n        self.assertEqual(response.status_code, status.HTTP_404_NOT_FOUND)  # Verify 404 response\n'})}),"\n",(0,a.jsx)(t.h3,{id:"test-update-endpoint",children:"Test Update Endpoint"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"class ArticleUpdateTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.other_user = UserFactory()  # Different user for permission testing\n        self.article = ArticleFactory(author=self.user)  # Article owned by self.user\n        self.client.force_authenticate(user=self.user)  # Authenticate as owner\n    \n    def test_update_article_success(self):\n        \"\"\"Test updating article with valid data\"\"\"\n        update_data = {'title': 'Updated Title'}  # Data to update\n        \n        response = self.client.patch(  # PATCH for partial update\n            f'/api/articles/{self.article.id}/',\n            update_data\n        )\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify update success\n        self.article.refresh_from_db()  # Reload article from database\n        self.assertEqual(self.article.title, 'Updated Title')  # Verify update applied\n    \n    def test_update_article_without_permission(self):\n        \"\"\"Test non-owner cannot update article\"\"\"\n        self.client.force_authenticate(user=self.other_user)  # Switch to different user\n        update_data = {'title': 'Hacked Title'}  # Attempted unauthorized update\n        \n        response = self.client.patch(  # Try to update as non-owner\n            f'/api/articles/{self.article.id}/',\n            update_data\n        )\n        \n        self.assertEqual(response.status_code, status.HTTP_403_FORBIDDEN)  # Verify permission denied\n        self.article.refresh_from_db()  # Reload to verify no changes\n        self.assertNotEqual(self.article.title, 'Hacked Title')  # Verify title unchanged\n"})}),"\n",(0,a.jsx)(t.h3,{id:"test-delete-endpoint",children:"Test Delete Endpoint"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'class ArticleDeleteTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.other_user = UserFactory()  # Different user for permission testing\n        self.article = ArticleFactory(author=self.user)  # Article owned by self.user\n        self.client.force_authenticate(user=self.user)  # Authenticate as owner\n    \n    def test_delete_article_success(self):\n        """Test deleting article"""\n        response = self.client.delete(f\'/api/articles/{self.article.id}/\')  # DELETE request\n        \n        self.assertEqual(response.status_code, status.HTTP_204_NO_CONTENT)  # Verify deletion success\n        self.assertEqual(Article.objects.count(), 0)  # Verify article removed from database\n    \n    def test_delete_article_without_permission(self):\n        """Test non-owner cannot delete article"""\n        self.client.force_authenticate(user=self.other_user)  # Switch to different user\n        \n        response = self.client.delete(f\'/api/articles/{self.article.id}/\')  # Try to delete as non-owner\n        \n        self.assertEqual(response.status_code, status.HTTP_403_FORBIDDEN)  # Verify permission denied\n        self.assertEqual(Article.objects.count(), 1)  # Verify article still exists\n'})}),"\n",(0,a.jsx)(t.h2,{id:"testing-authentication",children:"Testing Authentication"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"\u2705 STANDARD:"})," Use JWT authentication for all new projects. Token authentication is legacy."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"\ud83d\udcd6 Reference:"})," See ",(0,a.jsx)(t.code,{children:"04-Authentication-and-Permissions.md"})," for authentication setup."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"test-jwt-authentication-standard",children:"Test JWT Authentication (Standard)"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from rest_framework_simplejwt.tokens import RefreshToken\n\nclass JWTAuthenticationTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.refresh = RefreshToken.for_user(self.user)  # Generate JWT refresh token\n        self.access_token = str(self.refresh.access_token)  # Extract access token\n    \n    def test_authentication_with_valid_jwt(self):\n        """Test API access with valid JWT token"""\n        self.client.credentials(HTTP_AUTHORIZATION=f\'Bearer {self.access_token}\')  # Set JWT header\n        \n        response = self.client.get(\'/api/articles/\')  # Make authenticated request\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify authenticated access works\n    \n    def test_authentication_with_invalid_jwt(self):\n        """Test API access with invalid JWT token"""\n        self.client.credentials(HTTP_AUTHORIZATION=\'Bearer invalid_token\')  # Set invalid token\n        \n        response = self.client.get(\'/api/articles/\')  # Make request with invalid token\n        \n        self.assertEqual(response.status_code, status.HTTP_401_UNAUTHORIZED)  # Verify auth fails\n    \n    def test_authentication_without_jwt(self):\n        """Test API access without JWT token"""\n        response = self.client.get(\'/api/articles/\')  # Make request without token\n        \n        self.assertEqual(response.status_code, status.HTTP_401_UNAUTHORIZED)  # Verify auth required\n    \n    def test_jwt_token_refresh(self):\n        """Test refreshing JWT token"""\n        response = self.client.post(\'/api/token/refresh/\', {  # Request token refresh\n            \'refresh\': str(self.refresh)  # Send refresh token\n        })\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify refresh success\n        self.assertIn(\'access\', response.data)  # Check new access token provided\n    \n    def test_obtain_jwt_tokens(self):\n        """Test obtaining JWT tokens"""\n        response = self.client.post(\'/api/token/\', {  # Request tokens with credentials\n            \'username\': self.user.username,\n            \'password\': \'testpass123\'\n        })\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)  # Verify token generation\n        self.assertIn(\'access\', response.data)  # Check access token present\n        self.assertIn(\'refresh\', response.data)  # Check refresh token present\n'})}),"\n",(0,a.jsx)(t.h3,{id:"test-token-authentication-\ufe0f-legacy---not-recommended",children:"Test Token Authentication (\u26a0\ufe0f LEGACY - Not Recommended)"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"\u26a0\ufe0f WARNING:"})," Token authentication is legacy. Use JWT authentication tests above for new projects."]}),"\n",(0,a.jsx)(t.p,{children:"This section is maintained only for backward compatibility with existing projects."}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from rest_framework.authtoken.models import Token\n\nclass TokenAuthenticationTestCase(APITestCase):\n    """Legacy Token authentication tests - Use JWT for new projects"""\n    \n    def setUp(self):\n        self.user = UserFactory()\n        self.token = Token.objects.create(user=self.user)\n    \n    def test_authentication_with_valid_token(self):\n        """Test API access with valid token (LEGACY)"""\n        self.client.credentials(HTTP_AUTHORIZATION=f\'Token {self.token.key}\')\n        response = self.client.get(\'/api/articles/\')\n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n'})}),"\n",(0,a.jsx)(t.h2,{id:"testing-permissions",children:"Testing Permissions"}),"\n",(0,a.jsx)(t.h3,{id:"test-object-level-permissions",children:"Test Object-Level Permissions"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"class ArticlePermissionTestCase(APITestCase):\n    def setUp(self):\n        self.owner = UserFactory()\n        self.other_user = UserFactory()\n        self.admin = UserFactory(is_staff=True)\n        self.article = ArticleFactory(author=self.owner)\n    \n    def test_owner_can_update(self):\n        \"\"\"Test owner can update their article\"\"\"\n        self.client.force_authenticate(user=self.owner)\n        \n        response = self.client.patch(\n            f'/api/articles/{self.article.id}/',\n            {'title': 'Updated by owner'}\n        )\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_non_owner_cannot_update(self):\n        \"\"\"Test non-owner cannot update article\"\"\"\n        self.client.force_authenticate(user=self.other_user)\n        \n        response = self.client.patch(\n            f'/api/articles/{self.article.id}/',\n            {'title': 'Updated by other'}\n        )\n        \n        self.assertEqual(response.status_code, status.HTTP_403_FORBIDDEN)\n    \n    def test_admin_can_update(self):\n        \"\"\"Test admin can update any article\"\"\"\n        self.client.force_authenticate(user=self.admin)\n        \n        response = self.client.patch(\n            f'/api/articles/{self.article.id}/',\n            {'title': 'Updated by admin'}\n        )\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_anonymous_can_read(self):\n        \"\"\"Test anonymous users can read articles\"\"\"\n        response = self.client.get(f'/api/articles/{self.article.id}/')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_anonymous_cannot_create(self):\n        \"\"\"Test anonymous users cannot create articles\"\"\"\n        response = self.client.post('/api/articles/', {\n            'title': 'New Article',\n            'content': 'Content'\n        })\n        \n        self.assertEqual(response.status_code, status.HTTP_401_UNAUTHORIZED)\n"})}),"\n",(0,a.jsx)(t.h2,{id:"testing-serializers",children:"Testing Serializers"}),"\n",(0,a.jsx)(t.h3,{id:"test-serializer-validation",children:"Test Serializer Validation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"class ArticleSerializerTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n    \n    def test_valid_serializer(self):\n        \"\"\"Test serializer with valid data\"\"\"\n        data = {\n            'title': 'Valid Title',\n            'content': 'Valid content',\n            'published': False\n        }\n        \n        serializer = ArticleSerializer(data=data)\n        \n        self.assertTrue(serializer.is_valid())\n        self.assertEqual(serializer.validated_data['title'], data['title'])\n    \n    def test_invalid_title_too_short(self):\n        \"\"\"Test serializer rejects short title\"\"\"\n        data = {\n            'title': 'ab',  # Too short\n            'content': 'Valid content'\n        }\n        \n        serializer = ArticleSerializer(data=data)\n        \n        self.assertFalse(serializer.is_valid())\n        self.assertIn('title', serializer.errors)\n    \n    def test_missing_required_field(self):\n        \"\"\"Test serializer rejects missing required field\"\"\"\n        data = {'content': 'Content without title'}\n        \n        serializer = ArticleSerializer(data=data)\n        \n        self.assertFalse(serializer.is_valid())\n        self.assertIn('title', serializer.errors)\n    \n    def test_read_only_fields(self):\n        \"\"\"Test read-only fields are not writable\"\"\"\n        data = {\n            'title': 'Title',\n            'content': 'Content',\n            'id': 999,  # Read-only field\n            'created_at': '2020-01-01T00:00:00Z'  # Read-only field\n        }\n        \n        serializer = ArticleSerializer(data=data)\n        serializer.is_valid()\n        article = serializer.save(author=self.user)\n        \n        self.assertNotEqual(article.id, 999)\n        self.assertNotEqual(\n            article.created_at.isoformat(),\n            '2020-01-01T00:00:00+00:00'\n        )\n"})}),"\n",(0,a.jsx)(t.h2,{id:"testing-filtering-and-searching",children:"Testing Filtering and Searching"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'class ArticleFilterTestCase(APITestCase):\n    def setUp(self):\n        self.user1 = UserFactory()\n        self.user2 = UserFactory()\n        \n        ArticleFactory.create_batch(3, author=self.user1, published=True)\n        ArticleFactory.create_batch(2, author=self.user2, published=False)\n    \n    def test_filter_by_published(self):\n        """Test filtering by published status"""\n        response = self.client.get(\'/api/articles/?published=true\')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n        self.assertEqual(len(response.data[\'results\']), 3)\n    \n    def test_filter_by_author(self):\n        """Test filtering by author"""\n        response = self.client.get(f\'/api/articles/?author={self.user1.id}\')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n        self.assertEqual(len(response.data[\'results\']), 3)\n    \n    def test_search_in_title(self):\n        """Test searching in title"""\n        ArticleFactory(title=\'Django REST Framework Tutorial\')\n        \n        response = self.client.get(\'/api/articles/?search=Django\')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n        self.assertGreaterEqual(len(response.data[\'results\']), 1)\n    \n    def test_ordering(self):\n        """Test ordering results"""\n        response = self.client.get(\'/api/articles/?ordering=-created_at\')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n        results = response.data[\'results\']\n        \n        # Verify descending order\n        for i in range(len(results) - 1):\n            self.assertGreaterEqual(\n                results[i][\'created_at\'],\n                results[i + 1][\'created_at\']\n            )\n'})}),"\n",(0,a.jsx)(t.h2,{id:"testing-custom-actions",children:"Testing Custom Actions"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'class ArticleCustomActionTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.article = ArticleFactory(author=self.user, published=False)\n        self.client.force_authenticate(user=self.user)\n    \n    def test_publish_action(self):\n        """Test custom publish action"""\n        response = self.client.post(f\'/api/articles/{self.article.id}/publish/\')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n        self.article.refresh_from_db()\n        self.assertTrue(self.article.published)\n        self.assertIsNotNone(self.article.published_date)\n    \n    def test_publish_already_published_article(self):\n        """Test publishing already published article"""\n        self.article.published = True\n        self.article.save()\n        \n        response = self.client.post(f\'/api/articles/{self.article.id}/publish/\')\n        \n        self.assertEqual(response.status_code, status.HTTP_400_BAD_REQUEST)\n'})}),"\n",(0,a.jsx)(t.h2,{id:"testing-rate-limiting",children:"Testing Rate Limiting"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'class RateLimitTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.client.force_authenticate(user=self.user)\n    \n    def test_rate_limit_not_exceeded(self):\n        """Test requests within rate limit succeed"""\n        for _ in range(5):\n            response = self.client.get(\'/api/articles/\')\n            self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_rate_limit_exceeded(self):\n        """Test requests exceeding rate limit are throttled"""\n        # Make requests until throttled\n        for i in range(100):\n            response = self.client.get(\'/api/articles/\')\n            if response.status_code == status.HTTP_429_TOO_MANY_REQUESTS:\n                break\n        \n        self.assertEqual(response.status_code, status.HTTP_429_TOO_MANY_REQUESTS)\n        self.assertIn(\'detail\', response.data)\n'})}),"\n",(0,a.jsx)(t.h2,{id:"testing-with-mocks",children:"Testing with Mocks"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"from unittest.mock import patch, Mock\n\nclass ArticleExternalServiceTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        self.client.force_authenticate(user=self.user)\n    \n    @patch('myapp.services.external_api.publish_to_social_media')\n    def test_publish_with_social_media(self, mock_publish):\n        \"\"\"Test publishing article also publishes to social media\"\"\"\n        mock_publish.return_value = {'status': 'success'}\n        \n        article = ArticleFactory(author=self.user)\n        response = self.client.post(f'/api/articles/{article.id}/publish/')\n        \n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n        mock_publish.assert_called_once_with(article)\n    \n    @patch('myapp.services.email.send_notification_email')\n    def test_create_article_sends_notification(self, mock_send_email):\n        \"\"\"Test creating article sends notification email\"\"\"\n        data = {\n            'title': 'New Article',\n            'content': 'Content'\n        }\n        \n        response = self.client.post('/api/articles/', data)\n        \n        self.assertEqual(response.status_code, status.HTTP_201_CREATED)\n        mock_send_email.assert_called_once()\n"})}),"\n",(0,a.jsx)(t.h2,{id:"performance-testing",children:"Performance Testing"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from django.test import override_settings\nfrom django.db import connection\nfrom django.test.utils import override_settings\n\nclass ArticlePerformanceTestCase(APITestCase):\n    def setUp(self):\n        self.user = UserFactory()\n        ArticleFactory.create_batch(100, author=self.user)\n    \n    def test_list_query_count(self):\n        """Test list endpoint doesn\'t have N+1 queries"""\n        with self.assertNumQueries(3):  # Adjust based on your implementation\n            response = self.client.get(\'/api/articles/\')\n            self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_detail_query_count(self):\n        """Test detail endpoint query efficiency"""\n        article = Article.objects.first()\n        \n        with self.assertNumQueries(2):\n            response = self.client.get(f\'/api/articles/{article.id}/\')\n            self.assertEqual(response.status_code, status.HTTP_200_OK)\n'})}),"\n",(0,a.jsx)(t.h2,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"class ArticleIntegrationTestCase(APITestCase):\n    def test_complete_article_workflow(self):\n        \"\"\"Test complete article creation, update, and deletion workflow\"\"\"\n        # Create user and authenticate\n        user = UserFactory()\n        self.client.force_authenticate(user=user)\n        \n        # Create article\n        create_response = self.client.post('/api/articles/', {\n            'title': 'Integration Test Article',\n            'content': 'Test content'\n        })\n        self.assertEqual(create_response.status_code, status.HTTP_201_CREATED)\n        article_id = create_response.data['id']\n        \n        # Retrieve article\n        retrieve_response = self.client.get(f'/api/articles/{article_id}/')\n        self.assertEqual(retrieve_response.status_code, status.HTTP_200_OK)\n        \n        # Update article\n        update_response = self.client.patch(\n            f'/api/articles/{article_id}/',\n            {'title': 'Updated Title'}\n        )\n        self.assertEqual(update_response.status_code, status.HTTP_200_OK)\n        self.assertEqual(update_response.data['title'], 'Updated Title')\n        \n        # Publish article\n        publish_response = self.client.post(f'/api/articles/{article_id}/publish/')\n        self.assertEqual(publish_response.status_code, status.HTTP_200_OK)\n        \n        # Delete article\n        delete_response = self.client.delete(f'/api/articles/{article_id}/')\n        self.assertEqual(delete_response.status_code, status.HTTP_204_NO_CONTENT)\n        \n        # Verify deletion\n        verify_response = self.client.get(f'/api/articles/{article_id}/')\n        self.assertEqual(verify_response.status_code, status.HTTP_404_NOT_FOUND)\n"})}),"\n",(0,a.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(t.p,{children:"Key testing best practices:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Comprehensive Coverage:"})," Test all CRUD operations, authentication, permissions"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Use Factories:"})," Generate test data with factory_boy"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Test Edge Cases:"})," Invalid data, missing fields, permission denials"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Authentication Tests:"})," Test with and without authentication"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Permission Tests:"})," Test object-level and view-level permissions"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Serializer Tests:"})," Test validation, required fields, read-only fields"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Performance Tests:"})," Use ",(0,a.jsx)(t.code,{children:"assertNumQueries"})," to catch N+1 problems"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Integration Tests:"})," Test complete workflows"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Mock External Services:"})," Use mocks for external API calls"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Comprehensive testing ensures your API is reliable and maintainable."})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453(e,t,s){s.d(t,{R:()=>i,x:()=>l});var n=s(6540);const a={},r=n.createContext(a);function i(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);