"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[977],{8002(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"API-Versioning","title":"API Versioning & Architecture Best Practices","description":"Overview","source":"@site/docs/API-Versioning.md","sourceDirName":".","slug":"/API-Versioning","permalink":"/django-rest-best-practices/API-Versioning","draft":false,"unlisted":false,"editUrl":"https://github.com/pragnakalp/django-rest-best-practices/tree/main/docs/API-Versioning.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Performance and Optimization Best Practices","permalink":"/django-rest-best-practices/Performance-and-Optimization"},"next":{"title":"API Documentation Best Practices","permalink":"/django-rest-best-practices/API-Documentation-Best-Practices"}}');var s=i(4848),t=i(8453);const a={},l="API Versioning & Architecture Best Practices",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Project Architecture for Versioned APIs",id:"project-architecture-for-versioned-apis",level:2},{value:"1. Architectural Impact of Versioning",id:"1-architectural-impact-of-versioning",level:3},{value:"Code Organization",id:"code-organization",level:4},{value:"Team Structure Considerations",id:"team-structure-considerations",level:4},{value:"Database Architecture",id:"database-architecture",level:4},{value:"2. Architectural Patterns for Versioning",id:"2-architectural-patterns-for-versioning",level:3},{value:"Pattern 1: Parallel Version Architecture",id:"pattern-1-parallel-version-architecture",level:4},{value:"Pattern 2: Shared Core Architecture",id:"pattern-2-shared-core-architecture",level:4},{value:"Pattern 3: Adapter Pattern Architecture",id:"pattern-3-adapter-pattern-architecture",level:4},{value:"3. Architectural Decision Framework",id:"3-architectural-decision-framework",level:3},{value:"Scale Considerations",id:"scale-considerations",level:4},{value:"Migration Architecture",id:"migration-architecture",level:4},{value:"Why Version Your API",id:"why-version-your-api",level:2},{value:"Key Reasons",id:"key-reasons",level:3},{value:"When to Version",id:"when-to-version",level:3},{value:"4. API Design Principles for Versioned APIs",id:"4-api-design-principles-for-versioned-apis",level:3},{value:"RESTful URI Design Across Versions",id:"restful-uri-design-across-versions",level:4},{value:"Consistent HTTP Verb Usage",id:"consistent-http-verb-usage",level:4},{value:"Consistent Response Format Evolution",id:"consistent-response-format-evolution",level:4},{value:"Error Handling Consistency",id:"error-handling-consistency",level:4},{value:"Pagination Consistency",id:"pagination-consistency",level:4},{value:"5. Architectural Best Practices Summary",id:"5-architectural-best-practices-summary",level:3},{value:"Code Organization Principles",id:"code-organization-principles",level:4},{value:"Team Organization Principles",id:"team-organization-principles",level:4},{value:"Technical Principles",id:"technical-principles",level:4},{value:"Recommended Versioning Strategy: URL Path Versioning",id:"recommended-versioning-strategy-url-path-versioning",level:2},{value:"Why URL Path Versioning is the Best Choice",id:"why-url-path-versioning-is-the-best-choice",level:3},{value:"Implementation",id:"implementation",level:3},{value:"Key Benefits",id:"key-benefits",level:3},{value:"1. <strong>Maximum Visibility</strong>",id:"1-maximum-visibility",level:4},{value:"2. <strong>Developer Experience</strong>",id:"2-developer-experience",level:4},{value:"3. <strong>Infrastructure Benefits</strong>",id:"3-infrastructure-benefits",level:4},{value:"4. <strong>Documentation &amp; Testing</strong>",id:"4-documentation--testing",level:4},{value:"Real-World Examples",id:"real-world-examples",level:3},{value:"Best Practices for URL Path Versioning",id:"best-practices-for-url-path-versioning",level:3},{value:"1. <strong>Always Use Semantic Versioning</strong>",id:"1-always-use-semantic-versioning",level:4},{value:"2. <strong>Maintain Consistent URL Structure</strong>",id:"2-maintain-consistent-url-structure",level:4},{value:"3. <strong>Force Version Specification</strong>",id:"3-force-version-specification",level:4},{value:"4. <strong>Use Parallel URL Configuration</strong>",id:"4-use-parallel-url-configuration",level:4},{value:"When to Use URL Path Versioning",id:"when-to-use-url-path-versioning",level:3},{value:"URL Path Versioning with Different Architectures",id:"url-path-versioning-with-different-architectures",level:3},{value:"Parallel Version Architecture",id:"parallel-version-architecture",level:4},{value:"Shared Core Architecture",id:"shared-core-architecture",level:4},{value:"Implementing Version-Specific Logic with URL Path Versioning",id:"implementing-version-specific-logic-with-url-path-versioning",level:2},{value:"Using request.version in Views",id:"using-requestversion-in-views",level:3},{value:"Version-Specific Serializers",id:"version-specific-serializers",level:3},{value:"Version-Specific Querysets",id:"version-specific-querysets",level:3},{value:"Versioning Best Practices",id:"versioning-best-practices",level:2},{value:"1. Make Versioning Mandatory",id:"1-make-versioning-mandatory",level:3},{value:"2. Use Semantic Versioning",id:"2-use-semantic-versioning",level:3},{value:"3. Maintain Parallel Versions",id:"3-maintain-parallel-versions",level:3},{value:"4. Communicate Deprecation",id:"4-communicate-deprecation",level:3},{value:"5. Document Version Changes",id:"5-document-version-changes",level:3},{value:"6. Set Deprecation Timeline",id:"6-set-deprecation-timeline",level:3},{value:"7. Version Documentation",id:"7-version-documentation",level:3},{value:"Reversing URLs for Versioned APIs",id:"reversing-urls-for-versioned-apis",level:2},{value:"Include Request in reverse()",id:"include-request-in-reverse",level:3},{value:"Hyperlinked Serializers with Versioning",id:"hyperlinked-serializers-with-versioning",level:3},{value:"Migration Strategies",id:"migration-strategies",level:2},{value:"Gradual Migration",id:"gradual-migration",level:3},{value:"Feature Flags",id:"feature-flags",level:3},{value:"Adapter Pattern",id:"adapter-pattern",level:3},{value:"Testing Versioned APIs",id:"testing-versioned-apis",level:2},{value:"Summary",id:"summary",level:2},{value:"Architectural Best Practices",id:"architectural-best-practices",level:3},{value:"Versioning Strategy Best Practices",id:"versioning-strategy-best-practices",level:3},{value:"Implementation Best Practices",id:"implementation-best-practices",level:3},{value:"Decision Framework",id:"decision-framework",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"api-versioning--architecture-best-practices",children:"API Versioning & Architecture Best Practices"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"API versioning is not just a technical implementation detail but a strategic architectural decision that impacts your entire project structure, team organization, and long-term maintainability. This document covers architectural considerations and versioning strategies for evolving APIs in Django REST Framework."}),"\n",(0,s.jsx)(n.h2,{id:"project-architecture-for-versioned-apis",children:"Project Architecture for Versioned APIs"}),"\n",(0,s.jsx)(n.h3,{id:"1-architectural-impact-of-versioning",children:"1. Architectural Impact of Versioning"}),"\n",(0,s.jsx)(n.p,{children:"Before choosing a versioning strategy, consider how it affects your project architecture:"}),"\n",(0,s.jsx)(n.h4,{id:"code-organization",children:"Code Organization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"myproject/\n\u251c\u2500\u2500 apps/\n\u2502   \u251c\u2500\u2500 articles/\n\u2502   \u2502   \u251c\u2500\u2500 api/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 v1/\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 views/\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 article_views.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 comment_views.py\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 serializers/\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 article_serializers.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 comment_serializers.py\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 urls.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 v2/\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 views/\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 article_views.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 comment_views.py\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 serializers/\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 article_serializers.py\n\u2502   \u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 comment_serializers.py\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 urls.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 v3/\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 views/\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 article_views.py\n\u2502   \u2502   \u2502       \u2502   \u2514\u2500\u2500 comment_views.py\n\u2502   \u2502   \u2502       \u251c\u2500\u2500 serializers/\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502       \u2502   \u251c\u2500\u2500 article_serializers.py\n\u2502   \u2502   \u2502       \u2502   \u2514\u2500\u2500 comment_serializers.py\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 urls.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u2514\u2500\u2500 services.py\n\u2502   \u2514\u2500\u2500 users/\n\u2502       \u2514\u2500\u2500 api/\n\u2502           \u2514\u2500\u2500 v1/\n\u2502               \u251c\u2500\u2500 __init__.py\n\u2502               \u251c\u2500\u2500 views/\n\u2502               \u2502   \u251c\u2500\u2500 __init__.py\n\u2502               \u2502   \u2514\u2500\u2500 user_views.py\n\u2502               \u251c\u2500\u2500 serializers/\n\u2502               \u2502   \u251c\u2500\u2500 __init__.py\n\u2502               \u2502   \u2514\u2500\u2500 user_serializers.py\n\u2502               \u2514\u2500\u2500 urls.py\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 urls.py\n\u2502   \u251c\u2500\u2500 settings/\n\u2502   \u2502   \u251c\u2500\u2500 base.py\n\u2502   \u2502   \u251c\u2500\u2500 v1.py\n\u2502   \u2502   \u2514\u2500\u2500 v2.py\n\u2514\u2500\u2500 tests/\n    \u251c\u2500\u2500 api_v1/\n    \u251c\u2500\u2500 api_v2/\n    \u2514\u2500\u2500 api_v3/\n"})}),"\n",(0,s.jsx)(n.h4,{id:"team-structure-considerations",children:"Team Structure Considerations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version Teams"}),": Dedicated teams per API version for large organizations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Shared Services"}),": Common business logic in shared services layer"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backward Compatibility"}),": Team responsible for maintaining older versions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Migration Support"}),": Cross-team coordination for version transitions"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"database-architecture",children:"Database Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# models.py - Shared across versions\nclass Article(models.Model):\n    title = models.CharField(max_length=200)\n    content = models.TextField()\n    author = models.ForeignKey(User, on_delete=models.CASCADE)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    # Version-specific fields\n    legacy_id = models.CharField(max_length=50, null=True, blank=True)  # v1 compatibility\n    published_date = models.DateTimeField(null=True, blank=True)  # v2 feature\n    \n    class Meta:\n        db_table = 'articles'\n\n# services.py - Shared business logic\nclass ArticleService:\n    @staticmethod\n    def get_articles_for_user(user, version='v1'):\n        queryset = Article.objects.all()\n        \n        if version == 'v1':\n            return queryset.filter(author=user)\n        elif version == 'v2':\n            return queryset.filter(author=user, published_date__isnull=False)\n        else:\n            return queryset.filter(\n                author=user,\n                published_date__isnull=False\n            ).select_related('author')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-architectural-patterns-for-versioning",children:"2. Architectural Patterns for Versioning"}),"\n",(0,s.jsx)(n.h4,{id:"pattern-1-parallel-version-architecture",children:"Pattern 1: Parallel Version Architecture"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for:"})," Large-scale applications with significant version differences"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# config/urls.py\nurlpatterns = [\n    # Version 1 - Legacy support\n    path('api/v1/', include('apps.articles.api.v1.urls')),\n    path('api/v1/', include('apps.users.api.v1.urls')),\n    \n    # Version 2 - Current stable\n    path('api/v2/', include('apps.articles.api.v2.urls')),\n    path('api/v2/', include('apps.users.api.v2.urls')),\n    \n    # Version 3 - Beta/Next\n    path('api/v3/', include('apps.articles.api.v3.urls')),\n    path('api/v3/', include('apps.users.api.v3.urls')),\n]\n\n# apps/articles/api/v1/views/article_views.py\nclass ArticleViewSetV1(viewsets.ModelViewSet):\n    \"\"\"Legacy version with basic CRUD\"\"\"\n    queryset = Article.objects.all()\n    serializer_class = ArticleSerializerV1\n    permission_classes = [IsAuthenticated]\n    \n    def get_queryset(self):\n        return Article.objects.filter(author=self.request.user)\n\n# apps/articles/api/v2/views/article_views.py\nclass ArticleViewSetV2(viewsets.ModelViewSet):\n    \"\"\"Enhanced version with filtering and pagination\"\"\"\n    queryset = Article.objects.all()\n    serializer_class = ArticleSerializerV2\n    permission_classes = [IsAuthenticated]\n    filterset_fields = ['status', 'category']\n    search_fields = ['title', 'content']\n    \n    def get_queryset(self):\n        return Article.objects.filter(\n            author=self.request.user,\n            published_date__isnull=False\n        )\n"})}),"\n",(0,s.jsx)(n.h4,{id:"pattern-2-shared-core-architecture",children:"Pattern 2: Shared Core Architecture"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for:"})," Applications with incremental changes between versions"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# apps/articles/api/views/base_article_views.py\nclass BaseArticleViewSet(viewsets.ModelViewSet):\n    \"\"\"Base viewset with shared logic\"\"\"\n    queryset = Article.objects.all()\n    permission_classes = [IsAuthenticated]\n    \n    def get_queryset(self):\n        base_queryset = Article.objects.filter(author=self.request.user)\n        return self.apply_version_filters(base_queryset)\n    \n    def apply_version_filters(self, queryset):\n        version = getattr(self.request, 'version', 'v1')\n        \n        if version in ['v2', 'v3']:\n            queryset = queryset.filter(published_date__isnull=False)\n        \n        if version == 'v3':\n            queryset = queryset.select_related('author')\n        \n        return queryset\n\n# apps/articles/api/v1/views/article_views.py\nfrom ...views.base_article_views import BaseArticleViewSet\n\nclass ArticleViewSetV1(BaseArticleViewSet):\n    serializer_class = ArticleSerializerV1\n\n# apps/articles/api/v2/views/article_views.py\nfrom ...views.base_article_views import BaseArticleViewSet\n\nclass ArticleViewSetV2(BaseArticleViewSet):\n    serializer_class = ArticleSerializerV2\n    filterset_fields = ['status', 'category']\n\n# apps/articles/api/v3/views/article_views.py\nfrom ...views.base_article_views import BaseArticleViewSet\n\nclass ArticleViewSetV3(BaseArticleViewSet):\n    serializer_class = ArticleSerializerV3\n    filterset_fields = ['status', 'category', 'tags']\n    search_fields = ['title', 'content', 'summary']\n"})}),"\n",(0,s.jsx)(n.h4,{id:"pattern-3-adapter-pattern-architecture",children:"Pattern 3: Adapter Pattern Architecture"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Best for:"})," Applications requiring backward compatibility with minimal duplication"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# apps/articles/services.py\nclass ArticleService:\n    @staticmethod\n    def get_article_data(article, version='v1'):\n        \"\"\"Return article data in version-specific format\"\"\"\n        base_data = {\n            'id': article.id,\n            'title': article.title,\n            'content': article.content,\n            'created_at': article.created_at.isoformat(),\n        }\n        \n        if version == 'v1':\n            return ArticleAdapterV1.adapt(base_data, article)\n        elif version == 'v2':\n            return ArticleAdapterV2.adapt(base_data, article)\n        else:\n            return ArticleAdapterV3.adapt(base_data, article)\n\nclass ArticleAdapterV1:\n    @staticmethod\n    def adapt(base_data, article):\n        \"\"\"Adapt data for v1 API format\"\"\"\n        data = base_data.copy()\n        data['user'] = article.author.id  # v1 uses 'user' instead of 'author'\n        data['timestamp'] = int(article.created_at.timestamp())  # v1 uses timestamp\n        data.pop('created_at', None)  # v1 doesn't have created_at\n        return data\n\nclass ArticleAdapterV2:\n    @staticmethod\n    def adapt(base_data, article):\n        \"\"\"Adapt data for v2 API format\"\"\"\n        data = base_data.copy()\n        data['author'] = {\n            'id': article.author.id,\n            'username': article.author.username,\n        }\n        data['published_date'] = article.published_date.isoformat() if article.published_date else None\n        return data\n\n# apps/articles/api/views/article_views.py\nclass ArticleViewSet(viewsets.ModelViewSet):\n    \"\"\"Single viewset serving all versions\"\"\"\n    \n    def get_serializer_class(self):\n        version = getattr(self.request, 'version', 'v1')\n        return {\n            'v1': ArticleSerializerV1,\n            'v2': ArticleSerializerV2,\n            'v3': ArticleSerializerV3,\n        }.get(version, ArticleSerializerV1)\n    \n    def retrieve(self, request, *args, **kwargs):\n        article = self.get_object()\n        version = getattr(request, 'version', 'v1')\n        data = ArticleService.get_article_data(article, version)\n        return Response(data)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-architectural-decision-framework",children:"3. Architectural Decision Framework"}),"\n",(0,s.jsx)(n.h4,{id:"scale-considerations",children:"Scale Considerations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Small Application (< 10 endpoints)\n# Pattern: Shared Core with simple versioning\nclass SmallAppArchitecture:\n    versioning_strategy = "URLPathVersioning"\n    code_organization = "Single views.py with version checks"\n    team_structure = "1-2 developers"\n    \n# Medium Application (10-50 endpoints)\n# Pattern: Parallel Version with shared services\nclass MediumAppArchitecture:\n    versioning_strategy = "URLPathVersioning"\n    code_organization = "Version-specific modules"\n    team_structure = "Small team with version responsibilities"\n    \n# Large Application (> 50 endpoints)\n# Pattern: Full Parallel Architecture\nclass LargeAppArchitecture:\n    versioning_strategy = "URLPathVersioning or HostNameVersioning"\n    code_organization = "Separate apps per version"\n    team_structure = "Dedicated version teams"\n'})}),"\n",(0,s.jsx)(n.h4,{id:"migration-architecture",children:"Migration Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Migration Strategy Architecture\nclass MigrationArchitecture:\n    def __init__(self, current_version, target_version):\n        self.current_version = current_version\n        self.target_version = target_version\n        self.migration_period = timedelta(days=180)\n    \n    def setup_parallel_support(self):\n        \"\"\"Run both versions during migration\"\"\"\n        return {\n            'v1_status': 'deprecated',\n            'v2_status': 'active',\n            'v3_status': 'beta',\n            'migration_end': datetime.now() + self.migration_period\n        }\n    \n    def create_adapters(self):\n        \"\"\"Create compatibility adapters\"\"\"\n        return {\n            'v1_to_v2': AdapterV1ToV2(),\n            'v2_to_v3': AdapterV2ToV3(),\n        }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"why-version-your-api",children:"Why Version Your API"}),"\n",(0,s.jsx)(n.h3,{id:"key-reasons",children:"Key Reasons"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backward Compatibility:"})," Existing clients continue working while you introduce changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Controlled Evolution:"})," Roll out breaking changes without disrupting users"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallel Support:"})," Run multiple versions simultaneously during migration periods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Clear Communication:"})," Signal changes to API consumers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Architectural Evolution:"})," Allow fundamental changes to data models and business logic"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"when-to-version",children:"When to Version"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Breaking changes to request/response formats"}),"\n",(0,s.jsx)(n.li,{children:"Removing endpoints or fields"}),"\n",(0,s.jsx)(n.li,{children:"Changing authentication methods"}),"\n",(0,s.jsx)(n.li,{children:"Modifying business logic that affects behavior"}),"\n",(0,s.jsx)(n.li,{children:"Renaming resources or fields"}),"\n",(0,s.jsx)(n.li,{children:"Database schema changes affecting API contracts"}),"\n",(0,s.jsx)(n.li,{children:"Performance optimizations requiring different response structures"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-api-design-principles-for-versioned-apis",children:"4. API Design Principles for Versioned APIs"}),"\n",(0,s.jsx)(n.p,{children:"Based on core API design principles, versioned APIs should maintain consistency across versions:"}),"\n",(0,s.jsx)(n.h4,{id:"restful-uri-design-across-versions",children:"RESTful URI Design Across Versions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Consistent resource naming across versions\n# v1\nGET /api/v1/articles/\nGET /api/v1/articles/123/\nPOST /api/v1/articles/\n\n# v2 - Same resource names, enhanced functionality\nGET /api/v2/articles/\nGET /api/v2/articles/123/\nPOST /api/v2/articles/\n\n# Avoid this - changing resource names between versions\n# BAD: GET /api/v2/posts/ (changed from articles)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"consistent-http-verb-usage",children:"Consistent HTTP Verb Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class ArticleViewSetV1(viewsets.ModelViewSet):\n    """v1 - Basic CRUD following REST principles"""\n    \n    def list(self, request):\n        # GET /api/v1/articles/ - List articles\n        return super().list(request)\n    \n    def create(self, request):\n        # POST /api/v1/articles/ - Create article\n        return super().create(request)\n    \n    def retrieve(self, request, pk=None):\n        # GET /api/v1/articles/123/ - Get specific article\n        return super().retrieve(request, pk)\n    \n    def update(self, request, pk=None):\n        # PUT /api/v1/articles/123/ - Update article\n        return super().update(request, pk)\n    \n    def partial_update(self, request, pk=None):\n        # PATCH /api/v1/articles/123/ - Partial update\n        return super().partial_update(request, pk)\n    \n    def destroy(self, request, pk=None):\n        # DELETE /api/v1/articles/123/ - Delete article\n        return super().destroy(request, pk)\n\nclass ArticleViewSetV2(ArticleViewSetV1):\n    """v2 - Enhanced but maintains REST principles"""\n    \n    def list(self, request):\n        # Enhanced filtering but same endpoint\n        queryset = self.get_queryset()\n        filtered_queryset = self.apply_filters(queryset)\n        return Response(self.get_serializer(filtered_queryset, many=True).data)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"consistent-response-format-evolution",children:"Consistent Response Format Evolution"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# v1 Response Format\n{\n    "id": 1,\n    "title": "Article Title",\n    "content": "Article content",\n    "user": 123,  # v1 uses \'user\'\n    "timestamp": 1640995200  # v1 uses timestamp\n}\n\n# v2 Response Format - Enhanced but backward compatible structure\n{\n    "id": 1,\n    "title": "Article Title",\n    "content": "Article content",\n    "author": {  # Enhanced author object\n        "id": 123,\n        "username": "author_name"\n    },\n    "created_at": "2021-12-31T23:59:59Z",  # ISO 8601 format\n    "published_date": "2022-01-01T10:00:00Z",  # New field\n    "metadata": {  # New metadata section\n        "word_count": 1500,\n        "reading_time": 5\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"error-handling-consistency",children:"Error Handling Consistency"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class BaseAPIView(APIView):\n    """Base error handling for all versions"""\n    \n    def handle_exception(self, exc):\n        """Consistent error format across versions"""\n        response = super().handle_exception(exc)\n        \n        error_format = {\n            "error": {\n                "code": response.status_code,\n                "message": response.data.get(\'detail\', \'An error occurred\'),\n                "timestamp": timezone.now().isoformat(),\n            }\n        }\n        \n        # Add version-specific error details\n        if getattr(self.request, \'version\', \'v1\') in [\'v2\', \'v3\']:\n            error_format["error"]["request_id"] = getattr(self.request, \'id\', None)\n        \n        response.data = error_format\n        return response\n'})}),"\n",(0,s.jsx)(n.h4,{id:"pagination-consistency",children:"Pagination Consistency"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# v1 Pagination\n{\n    "count": 100,\n    "next": "http://api.example.com/api/v1/articles/?page=2",\n    "previous": null,\n    "results": [...]\n}\n\n# v2 Pagination - Enhanced but consistent structure\n{\n    "count": 100,\n    "next": "http://api.example.com/api/v2/articles/?page=2",\n    "previous": null,\n    "results": [...],\n    "pagination": {  # Enhanced pagination info\n        "page": 1,\n        "page_size": 20,\n        "total_pages": 5,\n        "has_next": true,\n        "has_previous": false\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"5-architectural-best-practices-summary",children:"5. Architectural Best Practices Summary"}),"\n",(0,s.jsx)(n.h4,{id:"code-organization-principles",children:"Code Organization Principles"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Separate Concerns"}),": Keep version-specific logic isolated"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Share Business Logic"}),": Common operations in shared services"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistent Structure"}),": Maintain similar patterns across versions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Clear Boundaries"}),": Well-defined interfaces between versions"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"team-organization-principles",children:"Team Organization Principles"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version Ownership"}),": Clear responsibility for each version"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cross-Version Coordination"}),": Teams must coordinate breaking changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Knowledge Sharing"}),": Documentation and patterns shared across teams"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Migration Planning"}),": Joint planning for version transitions"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"technical-principles",children:"Technical Principles"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backward Compatibility"}),": Don't break existing clients without deprecation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Forward Compatibility"}),": Design for future changes when possible"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance"}),": Versioning shouldn't significantly impact performance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Security"}),": Each version must maintain security standards"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"recommended-versioning-strategy-url-path-versioning",children:"Recommended Versioning Strategy: URL Path Versioning"}),"\n",(0,s.jsx)(n.h3,{id:"why-url-path-versioning-is-the-best-choice",children:"Why URL Path Versioning is the Best Choice"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"URL Path Versioning"})," is the industry standard and recommended approach for most APIs. With 80%+ adoption by major companies like Twitter, Stripe, and GitHub, it provides the best balance of clarity, usability, and maintainability."]}),"\n",(0,s.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# settings.py\nREST_FRAMEWORK = {\n    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning',\n    'DEFAULT_VERSION': 'v1',\n    'ALLOWED_VERSIONS': ['v1', 'v2', 'v3'],\n}\n\n# urls.py\nurlpatterns = [\n    path('api/v1/', include('myapp.api.v1.urls')),\n    path('api/v2/', include('myapp.api.v2.urls')),\n    path('api/v3/', include('myapp.api.v3.urls')),\n]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"GET /api/v1/articles/\nGET /api/v2/articles/\nGET /api/v3/articles/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"key-benefits",children:"Key Benefits"}),"\n",(0,s.jsxs)(n.h4,{id:"1-maximum-visibility",children:["1. ",(0,s.jsx)(n.strong,{children:"Maximum Visibility"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Version is clearly visible in the URL"}),"\n",(0,s.jsx)(n.li,{children:"Easy to identify which version is being used"}),"\n",(0,s.jsx)(n.li,{children:"No hidden headers or parameters"}),"\n",(0,s.jsx)(n.li,{children:"Clear communication to API consumers"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"2-developer-experience",children:["2. ",(0,s.jsx)(n.strong,{children:"Developer Experience"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Easy to test in browser"}),"\n",(0,s.jsx)(n.li,{children:"Simple to understand and debug"}),"\n",(0,s.jsx)(n.li,{children:"Works with all HTTP clients"}),"\n",(0,s.jsx)(n.li,{children:"No special tooling required"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"3-infrastructure-benefits",children:["3. ",(0,s.jsx)(n.strong,{children:"Infrastructure Benefits"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cacheable at CDN/proxy level"}),"\n",(0,s.jsx)(n.li,{children:"Simple URL routing"}),"\n",(0,s.jsx)(n.li,{children:"Easy load balancing"}),"\n",(0,s.jsx)(n.li,{children:"Works with existing web infrastructure"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"4-documentation--testing",children:["4. ",(0,s.jsx)(n.strong,{children:"Documentation & Testing"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Easy to document"}),"\n",(0,s.jsx)(n.li,{children:"Simple to write tests"}),"\n",(0,s.jsx)(n.li,{children:"Clear endpoint identification"}),"\n",(0,s.jsx)(n.li,{children:"Straightforward API exploration"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Twitter API"}),": ",(0,s.jsx)(n.code,{children:"/1.1/statuses/update.json"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stripe API"}),": ",(0,s.jsx)(n.code,{children:"/v1/charges"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GitHub API"}),": ",(0,s.jsx)(n.code,{children:"/api/v3/users"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Slack API"}),": ",(0,s.jsx)(n.code,{children:"/api/chat.postMessage"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"best-practices-for-url-path-versioning",children:"Best Practices for URL Path Versioning"}),"\n",(0,s.jsxs)(n.h4,{id:"1-always-use-semantic-versioning",children:["1. ",(0,s.jsx)(n.strong,{children:"Always Use Semantic Versioning"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Good - Semantic versions\n/api/v1/articles/\n/api/v2/articles/\n/api/v3/articles/\n\n# Avoid - Non-semantic versions\n/api/articles/v1/\n/api/v1.2/articles/\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"2-maintain-consistent-url-structure",children:["2. ",(0,s.jsx)(n.strong,{children:"Maintain Consistent URL Structure"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Good - Consistent structure\n/api/v1/articles/\n/api/v1/users/\n/api/v2/articles/\n/api/v2/users/\n\n# Avoid - Inconsistent structure\n/api/v1/articles/\n/api/users/v1/\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"3-force-version-specification",children:["3. ",(0,s.jsx)(n.strong,{children:"Force Version Specification"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# settings.py\nREST_FRAMEWORK = {\n    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning',\n    'DEFAULT_VERSION': None,  # Force clients to specify version\n    'ALLOWED_VERSIONS': ['v1', 'v2', 'v3'],\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"4-use-parallel-url-configuration",children:["4. ",(0,s.jsx)(n.strong,{children:"Use Parallel URL Configuration"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# config/urls.py\nurlpatterns = [\n    # Version 1 - Legacy support\n    path('api/v1/', include('apps.articles.api.v1.urls')),\n    path('api/v1/', include('apps.users.api.v1.urls')),\n    \n    # Version 2 - Current stable\n    path('api/v2/', include('apps.articles.api.v2.urls')),\n    path('api/v2/', include('apps.users.api.v2.urls')),\n    \n    # Version 3 - Beta/Next\n    path('api/v3/', include('apps.articles.api.v3.urls')),\n    path('api/v3/', include('apps.users.api.v3.urls')),\n]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"when-to-use-url-path-versioning",children:"When to Use URL Path Versioning"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Use URL Path Versioning for:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Public APIs (most common use case)"}),"\n",(0,s.jsx)(n.li,{children:"Third-party integrations"}),"\n",(0,s.jsx)(n.li,{children:"Mobile applications"}),"\n",(0,s.jsx)(n.li,{children:"Single Page Applications (React, Vue, Angular)"}),"\n",(0,s.jsx)(n.li,{children:"Web applications"}),"\n",(0,s.jsx)(n.li,{children:"Internal APIs"}),"\n",(0,s.jsx)(n.li,{children:"Development and testing"}),"\n",(0,s.jsx)(n.li,{children:"Documentation and examples"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"url-path-versioning-with-different-architectures",children:"URL Path Versioning with Different Architectures"}),"\n",(0,s.jsx)(n.h4,{id:"parallel-version-architecture",children:"Parallel Version Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# apps/articles/api/v1/urls.py\nfrom apps.articles.api.v1.views.article_views import ArticleViewSetV1\n\nurlpatterns = [\n    path('articles/', ArticleViewSetV1.as_view({'get': 'list'})),\n    path('articles/<int:pk>/', ArticleViewSetV1.as_view({'get': 'retrieve'})),\n]\n\n# apps/articles/api/v2/urls.py\nfrom apps.articles.api.v2.views.article_views import ArticleViewSetV2\n\nurlpatterns = [\n    path('articles/', ArticleViewSetV2.as_view({'get': 'list'})),\n    path('articles/<int:pk>/', ArticleViewSetV2.as_view({'get': 'retrieve'})),\n]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"shared-core-architecture",children:"Shared Core Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# apps/articles/api/urls.py\nfrom apps.articles.api.views.base_article_views import BaseArticleViewSet\n\nurlpatterns = [\n    path('articles/', BaseArticleViewSet.as_view({'get': 'list'})),\n    path('articles/<int:pk>/', BaseArticleViewSet.as_view({'get': 'retrieve'})),\n]\n\n# config/urls.py\nurlpatterns = [\n    path('api/v1/', include('apps.articles.api.urls')),\n    path('api/v2/', include('apps.articles.api.urls')),\n]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"implementing-version-specific-logic-with-url-path-versioning",children:"Implementing Version-Specific Logic with URL Path Versioning"}),"\n",(0,s.jsx)(n.h3,{id:"using-requestversion-in-views",children:"Using request.version in Views"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from rest_framework.views import APIView\nfrom rest_framework.response import Response\n\nclass ArticleListView(APIView):\n    def get(self, request):\n        articles = Article.objects.all()\n        \n        if request.version == 'v1':\n            serializer = ArticleSerializerV1(articles, many=True)\n        elif request.version == 'v2':\n            serializer = ArticleSerializerV2(articles, many=True)\n        else:\n            serializer = ArticleSerializerV3(articles, many=True)\n        \n        return Response(serializer.data)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"version-specific-serializers",children:"Version-Specific Serializers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ArticleViewSet(viewsets.ModelViewSet):\n    queryset = Article.objects.all()\n    \n    def get_serializer_class(self):\n        if self.request.version == 'v1':\n            return ArticleSerializerV1\n        elif self.request.version == 'v2':\n            return ArticleSerializerV2\n        return ArticleSerializerV3\n"})}),"\n",(0,s.jsx)(n.h3,{id:"version-specific-querysets",children:"Version-Specific Querysets"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ArticleViewSet(viewsets.ModelViewSet):\n    serializer_class = ArticleSerializer\n    \n    def get_queryset(self):\n        if self.request.version == 'v1':\n            # v1 returns all articles\n            return Article.objects.all()\n        elif self.request.version == 'v2':\n            # v2 returns only published articles\n            return Article.objects.filter(published=True)\n        else:\n            # v3 returns published articles with related data\n            return Article.objects.filter(published=True).select_related('author')\n"})}),"\n",(0,s.jsx)(n.h2,{id:"versioning-best-practices",children:"Versioning Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-make-versioning-mandatory",children:"1. Make Versioning Mandatory"}),"\n",(0,s.jsx)(n.p,{children:"Always require a version. Don't release unversioned APIs."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# settings.py\nREST_FRAMEWORK = {\n    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning',\n    'DEFAULT_VERSION': None,  # Force clients to specify version\n    'ALLOWED_VERSIONS': ['v1', 'v2', 'v3'],\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-semantic-versioning",children:"2. Use Semantic Versioning"}),"\n",(0,s.jsx)(n.p,{children:"Follow a clear versioning scheme:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Major version (v1, v2, v3):"})," Breaking changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Minor version (v1.1, v1.2):"})," Backward-compatible features"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Patch version (v1.1.1):"})," Bug fixes"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/api/v1/articles/      - Major version\n/api/v1.2/articles/    - Minor version\n/api/v1.2.1/articles/  - Patch version\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-maintain-parallel-versions",children:"3. Maintain Parallel Versions"}),"\n",(0,s.jsx)(n.p,{children:"Run old and new versions in parallel during transition."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# urls.py\nurlpatterns = [\n    path('api/v1/', include('myapp.api.v1.urls')),  # Deprecated\n    path('api/v2/', include('myapp.api.v2.urls')),  # Current\n    path('api/v3/', include('myapp.api.v3.urls')),  # Beta\n]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-communicate-deprecation",children:"4. Communicate Deprecation"}),"\n",(0,s.jsx)(n.p,{children:"Use HTTP headers to communicate deprecation."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from rest_framework.response import Response\nfrom datetime import datetime, timedelta\n\nclass DeprecatedAPIView(APIView):\n    def get(self, request):\n        response = Response({'data': 'some data'})\n        \n        # Deprecation warning\n        response['Warning'] = '299 - \"This API version is deprecated. Please migrate to v2.\"'\n        \n        # Sunset date\n        sunset_date = datetime.now() + timedelta(days=180)\n        response['Sunset'] = sunset_date.strftime('%a, %d %b %Y %H:%M:%S GMT')\n        \n        # Link to new version\n        response['Link'] = '</api/v2/>; rel=\"successor-version\"'\n        \n        return response\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-document-version-changes",children:"5. Document Version Changes"}),"\n",(0,s.jsx)(n.p,{children:"Maintain a comprehensive changelog."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"# API Changelog\n\n## v3 (2024-01-15)\n### Breaking Changes\n- Removed `author_name` field from Article response\n- Changed `created_at` format from timestamp to ISO 8601\n\n### New Features\n- Added pagination to all list endpoints\n- Added filtering support for articles\n\n### Deprecated\n- `/api/v2/` endpoints will be sunset on 2024-07-15\n\n## v2 (2023-06-01)\n### Breaking Changes\n- Renamed `user` field to `author` in Article model\n- Changed authentication from Basic to Token\n\n### New Features\n- Added article comments endpoint\n- Added user profile endpoint\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-set-deprecation-timeline",children:"6. Set Deprecation Timeline"}),"\n",(0,s.jsx)(n.p,{children:"Establish clear timelines for version support."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"API_VERSION_SUPPORT = {\n    'v1': {\n        'status': 'deprecated',\n        'released': '2022-01-01',\n        'deprecated': '2023-06-01',\n        'sunset': '2024-01-01',\n    },\n    'v2': {\n        'status': 'active',\n        'released': '2023-06-01',\n        'deprecated': None,\n        'sunset': None,\n    },\n    'v3': {\n        'status': 'beta',\n        'released': '2024-01-01',\n        'deprecated': None,\n        'sunset': None,\n    },\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"7-version-documentation",children:"7. Version Documentation"}),"\n",(0,s.jsx)(n.p,{children:"Use tools like drf-spectacular or drf-yasg to generate version-specific documentation."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from drf_spectacular.views import SpectacularAPIView, SpectacularSwaggerView\n\nurlpatterns = [\n    # v1 documentation\n    path('api/v1/schema/', SpectacularAPIView.as_view(api_version='v1'), name='schema-v1'),\n    path('api/v1/docs/', SpectacularSwaggerView.as_view(url_name='schema-v1'), name='docs-v1'),\n    \n    # v2 documentation\n    path('api/v2/schema/', SpectacularAPIView.as_view(api_version='v2'), name='schema-v2'),\n    path('api/v2/docs/', SpectacularSwaggerView.as_view(url_name='schema-v2'), name='docs-v2'),\n]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"reversing-urls-for-versioned-apis",children:"Reversing URLs for Versioned APIs"}),"\n",(0,s.jsx)(n.h3,{id:"include-request-in-reverse",children:"Include Request in reverse()"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from rest_framework.reverse import reverse\n\nclass ArticleViewSet(viewsets.ModelViewSet):\n    def list(self, request):\n        articles = Article.objects.all()\n        serializer = ArticleSerializer(\n            articles,\n            many=True,\n            context={'request': request}\n        )\n        \n        # Generate versioned URL\n        next_url = reverse('article-list', request=request)\n        \n        return Response({\n            'results': serializer.data,\n            'next': next_url\n        })\n"})}),"\n",(0,s.jsx)(n.h3,{id:"hyperlinked-serializers-with-versioning",children:"Hyperlinked Serializers with Versioning"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ArticleSerializer(serializers.HyperlinkedModelSerializer):\n    class Meta:\n        model = Article\n        fields = ['url', 'title', 'author', 'created_at']\n\n# In view, always pass request context\ndef get(self, request):\n    articles = Article.objects.all()\n    serializer = ArticleSerializer(\n        articles,\n        many=True,\n        context={'request': request}  # Required for versioned URLs\n    )\n    return Response(serializer.data)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"migration-strategies",children:"Migration Strategies"}),"\n",(0,s.jsx)(n.h3,{id:"gradual-migration",children:"Gradual Migration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ArticleViewSet(viewsets.ModelViewSet):\n    def get_serializer_class(self):\n        # Support both v1 and v2 during migration\n        if self.request.version in ['v1', 'v2']:\n            return ArticleSerializerV1V2Compatible\n        return ArticleSerializerV3\n"})}),"\n",(0,s.jsx)(n.h3,{id:"feature-flags",children:"Feature Flags"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ArticleViewSet(viewsets.ModelViewSet):\n    def get_queryset(self):\n        queryset = Article.objects.all()\n        \n        # Enable new feature only for v2+\n        if self.request.version in ['v2', 'v3']:\n            queryset = queryset.prefetch_related('tags')\n        \n        return queryset\n"})}),"\n",(0,s.jsx)(n.h3,{id:"adapter-pattern",children:"Adapter Pattern"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class ArticleAdapterV1:\n    \"\"\"Adapt v2 data to v1 format\"\"\"\n    @staticmethod\n    def adapt(data):\n        # Convert v2 format to v1 format\n        data['user'] = data.pop('author')\n        data['timestamp'] = int(data.pop('created_at').timestamp())\n        return data\n\nclass ArticleViewSet(viewsets.ModelViewSet):\n    def retrieve(self, request, pk=None):\n        article = self.get_object()\n        serializer = ArticleSerializerV2(article)\n        data = serializer.data\n        \n        if request.version == 'v1':\n            data = ArticleAdapterV1.adapt(data)\n        \n        return Response(data)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-versioned-apis",children:"Testing Versioned APIs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from rest_framework.test import APITestCase\n\nclass ArticleAPIVersioningTest(APITestCase):\n    def test_v1_response_format(self):\n        response = self.client.get('/api/v1/articles/')\n        self.assertEqual(response.status_code, 200)\n        self.assertIn('user', response.data[0])  # v1 uses 'user'\n    \n    def test_v2_response_format(self):\n        response = self.client.get('/api/v2/articles/')\n        self.assertEqual(response.status_code, 200)\n        self.assertIn('author', response.data[0])  # v2 uses 'author'\n    \n    def test_version_header(self):\n        response = self.client.get(\n            '/api/articles/',\n            HTTP_ACCEPT='application/json; version=v2'\n        )\n        self.assertEqual(response.status_code, 200)\n    \n    def test_invalid_version(self):\n        response = self.client.get('/api/v99/articles/')\n        self.assertEqual(response.status_code, 404)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.h3,{id:"architectural-best-practices",children:"Architectural Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Choose Architecture Pattern"}),": Parallel Version for large apps, Shared Core for incremental changes, Adapter for compatibility"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organize Code Structure"}),": Separate version modules with shared services and business logic"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Design for Scale"}),": Consider team structure, database architecture, and migration strategies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Maintain Consistency"}),": Apply RESTful principles consistently across all versions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plan for Evolution"}),": Design architecture to support future version requirements"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"versioning-strategy-best-practices",children:"Versioning Strategy Best Practices"}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use URL Path Versioning"}),": Industry standard with 80%+ adoption, maximum visibility and developer experience"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Make Mandatory"}),": Always require version specification, no unversioned APIs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Semantic Versioning"}),": Use clear major.minor.patch versioning scheme"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parallel Support"}),": Run multiple versions simultaneously during transitions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Communicate Changes"}),": Use deprecation headers and maintain changelog"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Set Timelines"}),": Establish clear deprecation and sunset dates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Document Thoroughly"}),": Provide version-specific documentation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test Versions"}),": Write tests for each API version"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plan Migration"}),": Provide clear migration paths for clients"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version Early"}),": Start with v1, don't wait until you need to version"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"implementation-best-practices",children:"Implementation Best Practices"}),"\n",(0,s.jsxs)(n.ol,{start:"16",children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Share Business Logic"}),": Keep common operations in shared services layer"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version-Specific Serializers"}),": Use different serializers for different response formats"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistent Error Handling"}),": Maintain error format consistency across versions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance Considerations"}),": Ensure versioning doesn't impact performance significantly"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Security Standards"}),": Each version must maintain security standards"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"decision-framework",children:"Decision Framework"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Application Size"}),(0,s.jsx)(n.th,{children:"Recommended Architecture"}),(0,s.jsx)(n.th,{children:"Team Structure"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Small (< 10 endpoints)"}),(0,s.jsx)(n.td,{children:"Shared Core"}),(0,s.jsx)(n.td,{children:"1-2 developers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Medium (10-50 endpoints)"}),(0,s.jsx)(n.td,{children:"Parallel Version"}),(0,s.jsx)(n.td,{children:"Small team with version responsibilities"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Large (> 50 endpoints)"}),(0,s.jsx)(n.td,{children:"Full Parallel"}),(0,s.jsx)(n.td,{children:"Dedicated version teams"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Architecture First"}),": Consider project structure and team organization before implementing versioning"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URL Path Versioning"}),": Use the industry standard approach for maximum visibility and developer experience"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistency Matters"}),": Apply API design principles consistently across all versions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plan for Migration"}),": Design architecture to support smooth version transitions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Share Wisely"}),": Share business logic but isolate version-specific concerns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Communicate Clearly"}),": Use deprecation headers, changelogs, and clear documentation"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Following these architectural practices with URL Path Versioning ensures your API can evolve smoothly while maintaining backward compatibility and providing clear migration paths for clients. The right architectural approach combined with URL Path Versioning creates a scalable, maintainable API that serves both current and future needs."})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);